<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
    </head>

    <!-- <body><p>Ime:</p>
        <input type="text" id="ime" name="ime" placeholder="ime">
        <p>Starost:</p><input type="number" style="width: 177px; box-sizing: border-box;" id="starost" name="starost" min="15" max="120">
        <p>Spol:</p>
        <input type="radio" name="spol" id="m">M
        <input type="radio" name="spol" id="f">Å½
        <p><button type="submit">Potrdi</button></p> -->

    <!-- âœ… 1. Ali moraÅ¡ imeti <form>?
        Ne moraÅ¡, ampak je priporoÄljivo, ker:

        omogoÄa submit s tipko Enter

        omogoÄa uporabo dogodka submit

        bolj semantiÄno (pravilna HTML struktura) -->

    <form id="obrazec">
        <p>Ime:</p>
        <input type="text" id="ime" name="ime" placeholder="ime">

        <p>Starost:</p>
        <input type="number" id="starost" name="starost" min="15" max="120"
            style="width: 177px; box-sizing: border-box;">

        <p>Spol:</p>
        <input type="radio" name="spol" value="M" id="m">M
        <input type="radio" name="spol" value="Å½" id="f">Å½

        <p><button type="submit">Potrdi</button></p>
    </form>

    <div id="izpis"></div>


    <script>
        class Oseba {
            constructor(ime, starost, spol) {
                this.ime = ime;
                this.starost = starost;
                this.spol = spol;
            }

            opis() {
                return `${this.ime}, ${this.starost} let, spol: ${this.spol}`;
            }
        }
        document.getElementById("obrazec").addEventListener("submit", function (e) {
            e.preventDefault(); // prepreÄi reload strani

            /*  ğŸ¯ Kaj dela e.preventDefault()?
            ğŸ‘‰ e je "event object", ki predstavlja ta submit dogodek.
            Metoda preventDefault() prekine privzeto vedenje brskalnika.*/

            //â›”ï¸ Privzeto vedenje brez e.preventDefault():
            // Ob kliku gumba submit obrazec osveÅ¾i stran (reload)
            // Podatki se poskusijo poslati nekam (Äe imaÅ¡ action=... v <form>)

            const ime = document.getElementById("ime").value.trim();
            const starost = Number(document.getElementById("starost").value);
            const spol = document.querySelector('input[name="spol"]:checked')?.value;/*najdi input z atributom name="spol"
        ki je trenutno izbran (checked) â†’ torej radio gumb 

        â“ Kaj pa ?.value?
        Äe je querySelector(...) uspeÅ¡en (ni null) â†’ vzemi .value
        Äe ni najden izbran radio gumb â†’ ne vrzi napake, ampak vrni undefined*/


            if (!ime || !starost || !spol) {
                alert("âš ï¸ Prosim, izpolni vsa polja.");
                return;
            }

            // // âœ… Ustvari objekt osebe
            // const oseba = {
            //     ime,
            //     starost,
            //     spol
            // };
            // const seznamOseb = [];
            // seznamOseb.push(new oseba);

            // localStorage.setItem('seznamOseb', JSON.stringify(seznamOseb));
            // ğŸ”¹ 3. Ustvari instanco razreda
            const novaOseba = new Oseba(ime, starost, spol);
            // ğŸ”¹ 4. Preberi obstojeÄe iz localStorage ali ustvari novo polje
            const seznam = JSON.parse(localStorage.getItem("seznamOseb")) || [];

            // ğŸ”¹ 5. Dodaj novo osebo
            seznam.push(novaOseba);

            // ğŸ”¹ 6. Shrani nazaj
            localStorage.setItem("seznamOseb", JSON.stringify(seznam));

            // ğŸ”¹ 7. IzpiÅ¡i
            document.getElementById("izpis").innerHTML = `
    <p>âœ… Shranjeno: ${novaOseba.opis()}</p>
  `;
        });

        //Prikaz oseb
        document.addEventListener("DOMContentLoaded", () => {
            prikaziOsebe(); // kliÄemo funkcijo za izpis
        });

        function prikaziOsebe() {
            const izpis = document.getElementById("izpis");
            izpis.innerHTML = ""; // poÄisti prejÅ¡nji izpis
            const seznam = JSON.parse(localStorage.getItem("seznamOseb")) || [];

            /////////////////////////
            ///////// array dostop
            statistika(
                seznam,
                oseba => oseba.starost < 18,                         // pogoj
                oseba => console.log(`${oseba.ime}, starost: ${oseba.starost}`) // kaj izpiÅ¡emo
            );
            statistika(seznam,oseba=>oseba.spol ? "m":"Å¾")

            seznam.forEach((oseba, index) => {
                const vrstica = document.createElement("div");

                vrstica.innerHTML = `
      <p>${oseba.ime}, ${oseba.starost} let, spol: ${oseba.spol}</p>
      <button class="izbrisi" data-indeks="${index}">ğŸ—‘ï¸ IzbriÅ¡i</button>
    `;

                izpis.appendChild(vrstica);
            });


            // Dogodki za gumbe â€œIzbriÅ¡iâ€
            document.querySelectorAll(".izbrisi").forEach((gumb) => {
                gumb.addEventListener("click", (e) => {
                    const indeks = e.target.dataset.indeks;
                    const seznam = JSON.parse(localStorage.getItem("seznamOseb")) || [];
                    seznam.splice(indeks, 1); // odstrani 1 osebo na mestu indeks
                    localStorage.setItem("seznamOseb", JSON.stringify(seznam));
                    prikaziOsebe(); // ponovno izpiÅ¡i
                });
            });
        }

        //prikaÅ¾i Å¾eljeno lastnost
        let izpisOseb = JSON.parse(localStorage.getItem("seznamOseb")) || [];

        const polnoletni = izpisOseb.filter(o => o.starost > 18);
        console.log("Polnoletni:", polnoletni.length);

        console.log(polnoletni);


        // ÄŒe Å¾eliÅ¡ izpisati imena vseh nad 18:
        polnoletni.forEach(oseba => {
            console.log(`Polnoletne osebe so: ${oseba.ime}  ${oseba.starost} `)
        });

        // âœ… Destrukturiranje (razloÅ¾eno spodaj)
        // const { ime: i, starost: s, spol: g } = oseba;

        // document.getElementById("izpis").textContent =
        //     `âœ… Profil: ${i}, ${s} let, spol: ${g}`;
        // });
        // // ğŸ§  3. Kaj je destrukturiranje ?
        // //             Destrukturiranje pomeni, da iz objekta ali arraya â€œizvleÄeÅ¡â€ podatke v posamezne spremenljivke.

        // // ğŸ“¦ Primer z objektom:
        // const oseba = {
        //     ime: "Lana",
        //     starost: 27,
        //     spol: "Å½"
        // };

        // //   function (e) {
        // //   e.preventDefault();
        // //   ...
        // // }
        // // Namesto:
        // //   (e) => {
        // //   e.preventDefault();
        // //   ...
        // // }
        // //â“ Zakaj je to tukaj Äisto v redu?
        // // V resnici lahko uporabiÅ¡ obe â€” obiÄajno function ali arrow function znotraj addEventListener delujeta enako, ker tukaj ne uporabljamo this znotraj funkcije.

        // //           function:               => arrow:
        // // this:     lastni this    	     nima  â€“ podeduje iz okolice
        // // arguments:obstaja	             ne obstaja
        // // new: lahko ustvariÅ¡ instanco      ne moreÅ¡
        // // berljivost:	daljÅ¡a	             krajÅ¡a


        // const { ime, starost, spol } = oseba;

        // console.log(ime);     // "Lana"
        // console.log(starost); // 27
        // // Lahko tudi preimenujeÅ¡:

        // const { ime: i, starost: s } = oseba;
        // console.log(i); // "Lana"
        // // ğŸ“¦ Primer z arrayem:

        // const arr = [1, 2, 3];
        // const [a, b, c] = arr;


        function statistika(array, pogojFn, izpisFn) {
            array
                .filter(pogojFn)         // najde elemente, ki ustrezajo pogoju
                .forEach(izpisFn);       // izpiÅ¡e jih
        }

    </script>
    </body>

</html>